"""
프롬프트 공통 설정

과목 공통으로 사용되는 규칙과 설정을 관리합니다.
"""

# ============================================================
# 배점 검증 규칙
# ============================================================

POINTS_VALIDATION_RULES = """📊 **[필수] 배점 검증 원칙**

1. **만점은 일반적으로 100점**입니다
   - 배점이 불분명한 경우 confidence를 낮추세요 (0.5 이하)
2. **배점 합계 검증**: 90점 미만 또는 110점 초과면 재확인
3. **흔한 배점 오류**:
   - 소문제 배점 누락 (예: 1번 (1), (2) 각 3점씩 → 6점)
   - 서술형 고배점 누락 (보통 5~10점)"""


# ============================================================
# 내신 과목 분류 원칙
# ============================================================

EXAM_SUBJECT_CLASSIFICATION = """🎯 **내신 시험지 과목 분류 원칙**

내신 시험지(중간고사/기말고사)는 **하나의 교재**에서 출제됩니다!

**압도적 과목 통합 규칙:**
1. 전체 문항 중 **60% 이상이 특정 과목** → 나머지도 같은 과목으로 분류
2. 시험지 전체를 먼저 파악 → 주요 과목 결정 → 모든 문항을 해당 과목으로 분류

**주의:** 모의고사/수능형은 제외 (여러 과목 혼합 가능)"""


# ============================================================
# 학교급 분리 규칙
# ============================================================

SCHOOL_LEVEL_RULES = """⚠️ **[필수] 학년 정보 우선 원칙**

시험지 상단의 학년 정보를 **최우선**으로 확인하고 해당 학교급의 분류표**만** 사용하세요!

**엄격한 학교급 분리:**
- "중1", "중2", "중3", "중학교" → **중학교 분류표만 사용**
  - 수학: [중1 수학], [중2 수학], [중3 수학]
  - 영어: [중1 영어], [중2 영어], [중3 영어]
- "고1", "고2", "고3", "고등학교" → **고등학교 분류표만 사용**
  - 수학: [공통수학1], [공통수학2], [대수], [미적분I], [미적분II], [기하], [확률과 통계]
  - 영어: [고1 영어], [고2 영어], [고3 영어]

**중복 단원 주의:**
- 과목별로 중학교와 고등학교에 유사 단원이 있을 수 있음 → **학년으로 구분**"""


# ============================================================
# 4단계 난이도 시스템 (공통 프레임워크)
# ============================================================

DIFFICULTY_SYSTEM_FRAMEWORK = """🚨 **4단계 난이도 시스템 (공통 원칙)**

**핵심 원칙: 문제를 푸는데 필요한 사고의 깊이로 판단!**

### 1️⃣ concept (개념) - 기본 개념 직접 적용
- 교과서 개념/정의/공식을 그대로 적용, 1-2단계 풀이
- 정답률 85% 이상 예상
- **서술형도 개념 가능**: 공식을 대입만 하면 되는 풀이

### 2️⃣ pattern (유형) - 알려진 유형/패턴 적용
- 기출/교과서 유제 수준, 2-3개 개념 순차 적용, 3-5단계 풀이
- 정답률 60-85% 예상
- ❌ 단순 공식 대입 → concept / 2개 이상 유형 결합 → reasoning

### 3️⃣ reasoning (심화) - 복합 개념 응용/사고력 필요
- 2-3개 대단원 개념 복합, 5-7단계 이상 풀이
- 정답률 30-60% 예상
- ❌ 계산만 복잡 → pattern / 교과서 예제 → pattern

### 4️⃣ creative (최상위) - 킬러 문제 (극히 제한적!)
- 3개 이상 대단원 복합, 8단계 이상, 교과서 범위를 넘는 창의적 통찰
- 정답률 30% 이하
- **원칙**: 시험당 최대 1문제, 의심스러우면 무조건 reasoning!

**난이도 판정 플로우차트:**
1. 공식만 대입? → concept
2. 알고있는 유형/패턴? → pattern
3. 2개 이상 개념 결합 or 새로운 접근? → reasoning
4. 교과서 범위 밖 창의적 통찰? → creative (극히 드물게!)

**❗ 중요:**
- **서술형이라고 무조건 난이도가 높은 게 아님!**
- **배점이 높다고 자동으로 높은 난이도가 아님!**
- 애매하면 항상 한 단계 낮게!"""
