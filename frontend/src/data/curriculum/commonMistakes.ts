/**
 * 단원별 자주 하는 실수 유형
 */
import type { UnitMistakes, CommonMistake } from './types';
import { isTopicMatch } from './utils';

export const COMMON_MISTAKES: UnitMistakes[] = [
  {
    unit: '소인수분해',
    mistakes: [
      {
        keywords: ['소인수분해'],
        mistakes: [
          '1을 소수로 착각하여 소인수분해에 포함시킴',
          '거듭제곱 표현에서 지수를 잘못 셈 (예: 2×2×2를 2²로 표기)',
          '약수의 개수 공식에서 지수에 1을 더하지 않음',
        ],
        prevention: [
          '소수의 정의(1과 자기 자신만을 약수로 가지는 1보다 큰 자연수)를 명확히 기억',
          '약수 개수 = (지수+1)들의 곱, 반드시 "+1"을 먼저 한 후 곱하기',
        ],
      },
    ],
  },
  {
    unit: '정수와 유리수',
    mistakes: [
      {
        keywords: ['정수와 유리수', '정수와', '유리수'],
        mistakes: [
          '음수끼리의 곱셈/나눗셈 결과를 음수로 착각 (실제로는 양수)',
          '0을 양수 또는 음수로 분류함',
          '절댓값 기호 안에 음수가 있을 때 부호 처리 실수 (|-3| = -3으로 착각)',
        ],
        prevention: [
          '곱셈/나눗셈에서 음수의 개수가 홀수면 음수, 짝수면 양수',
          '절댓값은 항상 0 이상의 수임을 기억하기',
        ],
      },
    ],
  },
  {
    unit: '문자의 사용과 식',
    mistakes: [
      {
        keywords: ['문자의 사용과 식', '문자와 식'],
        mistakes: [
          '문자에 음수 대입 시 괄호 누락 (x²에 x=-2 대입 시 -2² = -4로 계산)',
          '곱셈 기호 생략 규칙에서 숫자를 문자 뒤에 씀 (a×3을 a3으로 표기)',
          '나눗셈을 분수로 바꿀 때 분자와 분모를 반대로 씀',
        ],
        prevention: [
          '음수 대입 시 반드시 괄호 사용: (-2)² = 4',
          '계수(숫자)는 항상 문자 앞에: 3a (○), a3 (✗)',
        ],
      },
    ],
  },
  {
    unit: '일차방정식',
    mistakes: [
      {
        keywords: ['일차방정식'],
        mistakes: [
          '이항할 때 부호를 바꾸지 않음 (3x + 5 = 2에서 5를 그대로 이항)',
          '양변에 같은 수를 곱하거나 나눌 때 한쪽만 처리함',
          '활용 문제에서 구한 해가 문제 조건에 맞는지 확인하지 않음',
        ],
        prevention: [
          '이항 = 부호 변경, 등호를 넘어가면 반드시 부호가 바뀜',
          '답을 구한 후 원래 방정식에 대입하여 검산하는 습관',
        ],
      },
    ],
  },
  {
    unit: '좌표와 그래프',
    mistakes: [
      {
        keywords: ['좌표와 그래프', '좌표와', '그래프'],
        mistakes: [
          '좌표 순서를 (y, x)로 잘못 씀',
          '사분면 번호를 시계 방향으로 착각 (실제로는 반시계 방향)',
          'x축 위의 점에서 x좌표가 0이라고 착각 (실제로는 y좌표가 0)',
        ],
        prevention: [
          '좌표는 항상 (x좌표, y좌표) = (가로, 세로) 순서',
          'x축 위의 점 → y=0, y축 위의 점 → x=0',
        ],
      },
    ],
  },
  {
    unit: '정비례와 반비례',
    mistakes: [
      {
        keywords: ['정비례와 반비례', '정비례와', '반비례'],
        mistakes: [
          '정비례 y=ax에서 a의 부호와 그래프 방향을 반대로 이해',
          '반비례 y=a/x의 그래프를 직선으로 그림',
          '정비례 그래프가 원점을 지나지 않게 그림',
        ],
        prevention: [
          '정비례: 원점을 지나는 직선, 반비례: 원점을 지나지 않는 곡선(쌍곡선)',
          'a > 0이면 1, 3사분면 / a < 0이면 2, 4사분면',
        ],
      },
    ],
  },
  {
    unit: '기본 도형',
    mistakes: [
      {
        keywords: ['기본 도형', '점, 선, 면', '동위각', '엇각'],
        mistakes: [
          '동위각과 엇각을 혼동하여 잘못된 각도 계산',
          '평행선이 아닌 상황에서 동위각/엇각이 같다고 가정',
          '꼬인 위치를 평행으로 착각',
        ],
        prevention: [
          '동위각: 같은 위치, 엇각: 엇갈린 위치 (그림을 그려 확인)',
          '동위각/엇각이 같은 건 "평행선일 때만" 성립',
        ],
      },
    ],
  },
  {
    unit: '작도와 합동',
    mistakes: [
      {
        keywords: ['작도와 합동', '삼각형의 합동'],
        mistakes: [
          '삼각형 합동 조건 SSA를 합동 조건으로 착각 (SSS, SAS, ASA만 가능)',
          '대응하는 변과 각의 순서를 틀리게 표기',
          '작도 시 눈금 있는 자를 사용하여 길이를 재버림',
        ],
        prevention: [
          '합동 조건 3가지만 암기: SSS, SAS, ASA (AAA, SSA는 합동 조건 아님)',
          '합동 기호(≡) 사용 시 대응 순서 일치시키기',
        ],
      },
    ],
  },
  {
    unit: '평면도형의 성질',
    mistakes: [
      {
        keywords: ['평면도형의 성질', '다각형의 내각', '외각'],
        mistakes: [
          '내각의 합 공식 180°×(n-2)에서 n 대신 변의 개수-1을 대입',
          '정다각형의 한 외각 크기를 구할 때 360°/n 대신 180°/n으로 계산',
          '부채꼴 넓이 공식에서 호의 길이와 반지름을 혼동',
        ],
        prevention: [
          '외각의 합은 항상 360° (다각형 종류와 무관)',
          '부채꼴 넓이 = (1/2) × 반지름 × 호의 길이 = (중심각/360°) × πr²',
        ],
      },
    ],
  },
  {
    unit: '입체도형의 성질',
    mistakes: [
      {
        keywords: ['입체도형의 성질', '겉넓이', '부피'],
        mistakes: [
          '원기둥의 옆면을 원으로 착각 (실제로는 직사각형)',
          '원뿔의 전개도에서 부채꼴의 호의 길이와 밑면 둘레의 관계 무시',
          '정다면체의 종류를 5가지 이상으로 착각',
        ],
        prevention: [
          '회전체의 전개도를 직접 그려보는 연습',
          '정다면체는 5가지뿐: 정사면체, 정육면체, 정팔면체, 정십이면체, 정이십면체',
        ],
      },
    ],
  },
  {
    unit: '자료의 정리와 해석',
    mistakes: [
      {
        keywords: ['자료의 정리와 해석', '도수분포표', '히스토그램'],
        mistakes: [
          '줄기와 잎 그림에서 잎의 개수를 잘못 세어 도수 오류',
          '히스토그램에서 계급의 양 끝값 중복 처리 실수 (이상/미만 구분)',
          '상대도수의 합이 1이 아닌 값으로 계산',
        ],
        prevention: [
          '줄기와 잎 그림 해석 시 잎의 개수 = 그 계급의 도수',
          '상대도수 = (그 계급의 도수)/(전체 도수), 합은 반드시 1',
        ],
      },
    ],
  },
  {
    unit: '유리수와 순환소수',
    mistakes: [
      {
        keywords: ['유리수와 순환소수', '유리수와', '순환소수'],
        mistakes: [
          '분모에 2, 5 외의 소인수가 있어도 유한소수로 판별',
          '순환소수를 분수로 바꿀 때 9의 개수와 0의 개수를 혼동',
          '순환마디를 잘못 파악하여 점을 찍는 위치 오류',
        ],
        prevention: [
          '유한소수 조건: 기약분수의 분모 소인수가 2와 5뿐일 때',
          '0.ababab... = ab/99, 0.1ababab... = (1ab-1)/990 형태로 공식화',
        ],
      },
    ],
  },
  {
    unit: '식의 계산',
    mistakes: [
      {
        keywords: ['식의 계산', '지수법칙', '단항식의 곱셈'],
        mistakes: [
          '지수법칙에서 aᵐ × aⁿ = aᵐˣⁿ으로 착각 (실제로는 aᵐ⁺ⁿ)',
          '(aᵐ)ⁿ = aᵐ⁺ⁿ으로 착각 (실제로는 aᵐˣⁿ)',
          '동류항이 아닌 항끼리 덧셈/뺄셈 계산',
        ],
        prevention: [
          '곱셈은 지수 덧셈, 거듭제곱의 거듭제곱은 지수 곱셈',
          '동류항 = 문자와 차수가 모두 같은 항',
        ],
      },
    ],
  },
  {
    unit: '일차부등식',
    mistakes: [
      {
        keywords: ['일차부등식'],
        mistakes: [
          '양변에 음수를 곱하거나 나눌 때 부등호 방향을 바꾸지 않음',
          '"작지 않다(≥)"를 "<"로 잘못 변환',
          '해를 수직선에 나타낼 때 경계점 포함 여부(●/○) 혼동',
        ],
        prevention: [
          '음수로 곱하기/나누기 → 부등호 방향 반드시 반대로',
          '"작지 않다" = "크거나 같다" = ≥',
        ],
      },
    ],
  },
  {
    unit: '연립일차방정식',
    mistakes: [
      {
        keywords: ['연립일차방정식'],
        mistakes: [
          '가감법에서 한 식만 곱하고 다른 식은 그대로 두어 소거 실패',
          '대입법에서 대입한 후 같은 문자가 남아 있는데 계산 진행',
          '해가 무수히 많거나 없는 경우를 일반적인 해로 착각',
        ],
        prevention: [
          '소거할 문자의 계수를 맞춘 후 부호에 따라 더하기/빼기 결정',
          '두 식이 같아지면 해가 무수히 많음, 모순이면 해가 없음',
        ],
      },
    ],
  },
  {
    unit: '일차함수와 그래프',
    mistakes: [
      {
        keywords: ['일차함수와 그래프', '일차함수와', '그래프'],
        mistakes: [
          '기울기가 음수일 때 그래프가 오른쪽 위로 향하게 그림',
          'y절편을 x절편으로 착각하여 점의 위치 오류',
          '기울기 계산에서 (y증가량)/(x증가량)의 분자와 분모를 반대로',
        ],
        prevention: [
          '기울기 > 0: 오른쪽 위 ↗, 기울기 < 0: 오른쪽 아래 ↘',
          'y절편: x=0일 때 y값, x절편: y=0일 때 x값',
        ],
      },
    ],
  },
  {
    unit: '일차함수와 일차방정식의 관계',
    mistakes: [
      {
        keywords: ['일차함수와 일차방정식의 관계', '일차함수와 일차방정식', '두 직선의 교점', '평행조건', '일치조건'],
        mistakes: [
          '두 직선이 평행인데 기울기가 다르다고 판단',
          '연립방정식의 해와 두 직선의 교점이 다르다고 생각',
          'x = k 형태의 직선을 기울기가 0인 직선으로 착각 (실제로는 기울기 없음)',
        ],
        prevention: [
          '평행 조건: 기울기 같고 y절편 다름 / 일치 조건: 기울기, y절편 모두 같음',
          'x = k는 y축에 평행한 수직선, y = k는 x축에 평행한 수평선',
        ],
      },
    ],
  },
  {
    unit: '삼각형의 성질',
    mistakes: [
      {
        keywords: ['삼각형의 성질', '이등변삼각형', '직각삼각형'],
        mistakes: [
          '이등변삼각형에서 꼭지각의 이등분선이 밑변을 "이등분만" 한다고 생각 (수직이등분)',
          '외심과 내심의 정의를 반대로 기억',
          '직각삼각형의 외심이 빗변의 중점임을 모름',
        ],
        prevention: [
          '외심: 세 변의 수직이등분선의 교점, 내심: 세 각의 이등분선의 교점',
          '외심에서 세 꼭짓점까지 거리 같음, 내심에서 세 변까지 거리 같음',
        ],
      },
    ],
  },
  {
    unit: '사각형의 성질',
    mistakes: [
      {
        keywords: ['사각형의 성질', '평행사변형', '마름모', '직사각형'],
        mistakes: [
          '평행사변형의 조건 5가지 중 일부만 알고 있음',
          '직사각형의 대각선이 서로를 수직이등분한다고 착각 (이등분만 함)',
          '마름모의 대각선이 서로 같다고 착각 (수직이등분만 함)',
        ],
        prevention: [
          '직사각형: 대각선 길이 같고 이등분 / 마름모: 대각선 수직이등분',
          '정사각형: 대각선 길이 같고 수직이등분 (둘 다 만족)',
        ],
      },
    ],
  },
  {
    unit: '도형의 닮음',
    mistakes: [
      {
        keywords: ['도형의 닮음', '닮음비', '축소', '확대'],
        mistakes: [
          '닮음비와 넓이비를 같다고 생각 (넓이비 = 닮음비²)',
          'AA 닮음에서 세 각이 모두 같아야 한다고 착각 (두 각만 같으면 됨)',
          '대응변의 순서를 틀리게 비례식 작성',
        ],
        prevention: [
          '닮음비 m:n이면, 넓이비 m²:n², 부피비 m³:n³',
          '닮음 기호(∽) 사용 시 대응 순서 일치시키기',
        ],
      },
    ],
  },
  {
    unit: '피타고라스 정리',
    mistakes: [
      {
        keywords: ['피타고라스 정리', '피타고라스', '직각삼각형', '빗변'],
        mistakes: [
          '빗변이 아닌 변을 가장 긴 변으로 잡고 공식 적용',
          'a² + b² = c²에서 c를 임의의 변으로 설정',
          '직각삼각형 판별 시 가장 긴 변의 제곱과 나머지 두 변 제곱의 합 비교를 반대로',
        ],
        prevention: [
          '빗변(가장 긴 변)의 제곱 = 나머지 두 변의 제곱의 합',
          '피타고라스 수 암기: (3,4,5), (5,12,13), (8,15,17), (7,24,25)',
        ],
      },
    ],
  },
  {
    unit: '경우의 수',
    mistakes: [
      {
        keywords: ['경우의 수', '순열', '조합'],
        mistakes: [
          '합의 법칙(또는)과 곱의 법칙(그리고)을 반대로 적용',
          '중복되는 경우를 빼지 않고 합의 법칙 적용',
          '순서가 있는 경우와 없는 경우를 구분하지 않음',
        ],
        prevention: [
          '"또는/이거나" → 더하기, "그리고/동시에" → 곱하기',
          '수형도를 그려 경우의 수를 직접 세어 검증',
        ],
      },
    ],
  },
  {
    unit: '확률',
    mistakes: [
      {
        keywords: ['확률', '확률의 뜻', '여사건', '경우의 수', '복원추출', '비복원추출'],
        mistakes: [
          '확률이 1을 초과하는 값으로 계산해도 이상함을 느끼지 못함',
          '"적어도 하나"를 직접 구하려다 경우를 빠뜨림 (여사건 이용해야 함)',
          '복원추출과 비복원추출을 구분하지 않음',
        ],
        prevention: [
          '확률은 항상 0 ≤ P ≤ 1 범위 내, 벗어나면 계산 오류',
          '"적어도" → 1 - (하나도 아닌 경우의 확률)',
        ],
      },
    ],
  },
  {
    unit: '제곱근과 실수',
    mistakes: [
      {
        keywords: ['제곱근과 실수', '무리수', '제곱근'],
        mistakes: [
          '√4 = ±2로 착각 (√4 = 2, 4의 제곱근이 ±2)',
          '√a²을 항상 a로 계산 (a < 0이면 √a² = -a)',
          '무리수와 유리수의 분류를 혼동 (π, √2는 무리수)',
        ],
        prevention: [
          '√ 기호는 양의 제곱근만 의미, "제곱근"은 ±√ 모두 의미',
          '√a² = |a| (절댓값)로 기억',
        ],
      },
    ],
  },
  {
    unit: '근호를 포함한 식의 계산',
    mistakes: [
      {
        keywords: ['근호를 포함한 식의 계산', '제곱근의 계산', '분모의 유리화', '근호의 덧셈', '근호의 뺄셈'],
        mistakes: [
          '√a + √b = √(a+b)로 착각 (틀림!)',
          '분모의 유리화에서 분자에 같은 수를 곱하지 않음',
          '√12를 √4 × √3 = 2√3으로 간단히 하지 않고 그대로 둠',
        ],
        prevention: [
          '제곱근의 덧셈/뺄셈은 근호 안의 수가 같을 때만 가능',
          '분모 유리화: 분모와 분자에 같은 수(또는 켤레식)를 곱함',
        ],
      },
    ],
  },
  {
    unit: '다항식의 곱셈',
    mistakes: [
      {
        keywords: ['다항식의 곱셈', '곱셈공식', '완전제곱식'],
        mistakes: [
          '(a+b)² = a² + b²로 착각 (중간항 2ab 누락)',
          '(a-b)² = a² - b²로 착각 ((a-b)(a+b) = a² - b²와 혼동)',
          '곱셈 공식 변형(a²+b² = (a+b)² - 2ab)을 적용하지 못함',
        ],
        prevention: [
          '곱셈 공식 전개 결과를 직접 손으로 확인하는 습관',
          '자주 쓰는 공식 변형을 별도로 정리하여 암기',
        ],
      },
    ],
  },
  {
    unit: '인수분해',
    mistakes: [
      {
        keywords: ['인수분해'],
        mistakes: [
          '공통인수를 완전히 묶지 않음 (예: 2x+4를 2(x+4)로 착각)',
          'x² - 9를 (x-3)²으로 착각 ((x-3)(x+3)이 맞음)',
          '완전제곱식 판별 시 중간항 계수 확인 누락',
        ],
        prevention: [
          '인수분해 후 반드시 전개하여 원래 식과 같은지 검산',
          'a² - b² = (a-b)(a+b), a² ± 2ab + b² = (a±b)² 구분',
        ],
      },
    ],
  },
  {
    unit: '이차방정식의 풀이',
    mistakes: [
      {
        keywords: ['이차방정식의 풀이', '근의 공식', '판별식', '이차방정식'],
        mistakes: [
          '근의 공식에서 분모 2a를 a로 착각',
          '판별식 D = b² - 4ac에서 부호 실수 (-4ac를 +4ac로)',
          '인수분해 가능한데도 무조건 근의 공식만 사용하여 계산 복잡',
        ],
        prevention: [
          '근의 공식: x = (-b ± √(b²-4ac)) / 2a, 분모는 반드시 2a',
          '짝수 공식(b가 짝수일 때)도 암기하면 계산 간편',
        ],
      },
    ],
  },
  {
    unit: '이차방정식의 활용',
    mistakes: [
      {
        keywords: ['이차방정식의 활용', '이차방정식 활용', '이차방정식 문제'],
        mistakes: [
          '문제에서 요구하는 것과 다른 값을 미지수로 설정',
          '이차방정식의 두 근 중 문제 조건에 맞지 않는 근을 답으로 선택',
          '단위를 통일하지 않고 식을 세움',
        ],
        prevention: [
          '구한 해가 문제 상황에 적합한지 반드시 확인 (음수, 자연수 조건 등)',
          '문제 읽을 때 구하는 것에 밑줄 긋기',
        ],
      },
    ],
  },
  {
    unit: '이차함수와 그래프',
    mistakes: [
      {
        keywords: ['이차함수와 그래프', '이차함수와', '그래프'],
        mistakes: [
          'y = ax²에서 a > 0이면 아래로 볼록으로 착각 (위로 볼록이 맞음... 아니, 위로 볼록이 틀림. a>0이면 아래로 볼록)',
          '꼭짓점 좌표 (p, q)를 (-p, q)로 착각 (y = a(x-p)² + q에서)',
          '축의 방정식을 y = p로 착각 (x = p가 맞음)',
        ],
        prevention: [
          'a > 0: 아래로 볼록(∪), a < 0: 위로 볼록(∩)',
          'y = a(x-p)² + q → 꼭짓점 (p, q), 축 x = p',
        ],
      },
    ],
  },
  {
    unit: '이차함수의 활용',
    mistakes: [
      {
        keywords: ['이차함수의 활용', '이차함수 최대', '이차함수 최소', '이차함수 그래프'],
        mistakes: [
          '최댓값/최솟값이 항상 꼭짓점에서 나온다고 가정 (정의역 제한 시 다를 수 있음)',
          '이차함수와 x축의 교점 개수를 구할 때 판별식 부호 판단 오류',
          '그래프의 개형을 그리지 않고 대수적으로만 접근',
        ],
        prevention: [
          '정의역이 제한된 경우, 구간 내에서 최대/최소 확인',
          '간단한 그래프라도 반드시 그려서 시각적으로 확인',
        ],
      },
    ],
  },
  {
    unit: '삼각비',
    mistakes: [
      {
        keywords: ['삼각비'],
        mistakes: [
          'sin, cos, tan의 정의에서 변의 위치를 혼동',
          '특수각(30°, 45°, 60°)의 삼각비 값을 서로 바꿔 기억',
          '삼각비 표에서 sin과 cos의 값을 반대로 읽음',
        ],
        prevention: [
          'sin = 대변/빗변, cos = 인접변/빗변, tan = 대변/인접변 ("소대빗, 코인빗, 탄대인")',
          '특수각 표를 손으로 직접 그려서 암기',
        ],
      },
    ],
  },
  {
    unit: '삼각비의 활용',
    mistakes: [
      {
        keywords: ['삼각비의 활용', '삼각비 활용', '삼각형의 넓이'],
        mistakes: [
          '직각삼각형이 아닌 삼각형에 직접 삼각비 적용',
          '삼각형 넓이 공식 (1/2)ab sin C에서 1/2를 빠뜨림',
          '예각/둔각에 따른 삼각비 값의 부호를 고려하지 않음 (중학교에서는 예각만)',
        ],
        prevention: [
          '직각삼각형이 없으면 수선을 그어 직각삼각형 만들기',
          '넓이 = (1/2) × 두 변 × 사잇각의 sin, 반드시 1/2 포함',
        ],
      },
    ],
  },
  {
    unit: '원의 성질',
    mistakes: [
      {
        keywords: ['원의 성질', '원주각', '중심각', '반원', '지름'],
        mistakes: [
          '원주각과 중심각의 관계에서 "절반"을 반대로 적용 (원주각 = 중심각의 절반)',
          '같은 호에 대한 원주각이 위치에 따라 다르다고 착각 (모두 같음)',
          '반원에 대한 원주각이 90°임을 모름',
        ],
        prevention: [
          '중심각 = 원주각의 2배, 원주각 = 중심각의 1/2',
          '지름에 대한 원주각(반원에 대한 원주각) = 90°',
        ],
      },
    ],
  },
  {
    unit: '원과 직선',
    mistakes: [
      {
        keywords: ['원과 직선', '할선', '접선', '현'],
        mistakes: [
          '접선이 접점에서 반지름과 수직임을 이용하지 않음',
          '원 밖의 한 점에서 그은 두 접선의 길이가 같음을 모름',
          '할선과 접선의 관계(접선의 길이의 제곱 = 할선의 두 부분의 곱)를 잘못 적용',
        ],
        prevention: [
          '접선 ⊥ 반지름 (접점에서)을 항상 그림에 표시',
          '접선의 길이 문제는 직각삼각형을 찾아 피타고라스 정리 활용',
        ],
      },
    ],
  },
  {
    unit: '대푯값과 산포도',
    mistakes: [
      {
        keywords: ['대푯값과 산포도', '대푯값과', '산포도'],
        mistakes: [
          '평균, 중앙값, 최빈값의 개념을 혼동',
          '편차의 합이 0임을 이용하지 않고 복잡하게 계산',
          '분산 계산 시 편차의 합의 제곱과 편차 제곱의 합을 혼동',
        ],
        prevention: [
          '분산 = (편차²의 평균) = (변량²의 평균) - (평균)²',
          '표준편차 = √분산, 단위가 원래 데이터와 같아짐',
        ],
      },
    ],
  },
  {
    unit: '상관관계',
    mistakes: [
      {
        keywords: ['상관관계'],
        mistakes: [
          '상관관계가 있으면 인과관계도 있다고 착각',
          '산점도에서 점들이 우하향하는데 양의 상관관계라고 판단',
          '상관관계의 강도와 상관계수의 부호를 혼동',
        ],
        prevention: [
          '양의 상관관계: 우상향 ↗, 음의 상관관계: 우하향 ↘',
          '상관관계 ≠ 인과관계 (제3의 변수 가능성)',
        ],
      },
    ],
  },
  {
    unit: '다항식의 연산',
    mistakes: [
      {
        keywords: ['다항식의 연산', '곱셈공식', '인수분해'],
        mistakes: [
          '(a+b+c)²의 전개에서 교차항(2ab, 2bc, 2ca)을 누락',
          '치환 후 원래 문자로 되돌리는 것을 잊음',
          '다항식 나눗셈에서 차수가 낮은 항이 없을 때 0을 넣지 않음',
        ],
        prevention: [
          '전개 후 항의 개수가 맞는지 확인 (이항 전개는 n+1개 항)',
          '조립제법 사용 시 빠진 차수에 0 삽입',
        ],
      },
    ],
  },
  {
    unit: '나머지정리와 인수정리',
    mistakes: [
      {
        keywords: ['나머지정리와 인수정리', '나머지정리와', '인수정리'],
        mistakes: [
          'P(x)를 (x-a)로 나눈 나머지가 P(-a)라고 착각 (P(a)가 맞음)',
          '조립제법에서 나누는 수의 부호를 바꾸지 않음',
          '인수정리에서 P(a) = 0이면 (x+a)가 인수라고 착각 ((x-a)가 인수)',
        ],
        prevention: [
          '(x-a)로 나눈 나머지 = P(a), (x+a)로 나눈 나머지 = P(-a)',
          '조립제법: x-2로 나눌 때는 2를 사용, x+3으로 나눌 때는 -3 사용',
        ],
      },
    ],
  },
  {
    unit: '인수분해',
    mistakes: [
      {
        keywords: ['인수분해'],
        mistakes: [
          '3차 이상의 다항식에서 인수정리 사용 시 약수만 대입해야 함을 모름',
          '복이차식(x⁴ + ax² + b)을 치환 없이 바로 인수분해하려 함',
          '인수분해가 완전히 되지 않았는데 멈춤 (더 인수분해 가능한 경우)',
        ],
        prevention: [
          '최고차항 계수가 1일 때, 상수항의 약수를 대입하여 인수 찾기',
          '인수분해 결과를 전개하여 원래 식과 일치하는지 검산',
        ],
      },
    ],
  },
  {
    unit: '복소수',
    mistakes: [
      {
        keywords: ['복소수'],
        mistakes: [
          'i² = 1로 착각 (i² = -1)',
          '켤레복소수의 정의를 잘못 이해 (a+bi의 켤레는 a-bi)',
          '복소수의 나눗셈에서 분모 실수화를 하지 않음',
        ],
        prevention: [
          'i의 거듭제곱 주기: i, -1, -i, 1 (4개 단위로 반복)',
          '복소수 나눗셈: 분모의 켤레복소수를 분모와 분자에 곱함',
        ],
      },
    ],
  },
  {
    unit: '이차방정식',
    mistakes: [
      {
        keywords: ['이차방정식'],
        mistakes: [
          '판별식 D = b² - 4ac의 부호 해석 오류 (D > 0: 서로 다른 두 실근)',
          '근과 계수의 관계에서 두 근의 합 = -b/a에서 부호 실수',
          '켤레근 정리를 실계수 이차방정식이 아닌 경우에 적용',
        ],
        prevention: [
          'D > 0: 서로 다른 두 실근, D = 0: 중근, D < 0: 서로 다른 두 허근',
          '근의 합 = -b/a (부호 주의!), 근의 곱 = c/a',
        ],
      },
    ],
  },
  {
    unit: '이차방정식과 이차함수',
    mistakes: [
      {
        keywords: ['이차방정식과 이차함수', '이차방정식과', '이차함수'],
        mistakes: [
          '이차함수 그래프와 x축의 교점 개수를 판별식 부호와 반대로 연결',
          '"서로 다른 두 점에서 만난다"를 D ≥ 0으로 착각 (D > 0이 맞음)',
          '그래프가 x축에 접한다 = 중근을 가진다의 연결을 못함',
        ],
        prevention: [
          'D > 0: 2개 교점, D = 0: 1개 교점(접함), D < 0: 교점 없음',
          '이차함수의 최대/최소 문제와 이차방정식의 실근 존재 조건 연결',
        ],
      },
    ],
  },
  {
    unit: '여러 가지 방정식',
    mistakes: [
      {
        keywords: ['여러 가지 방정식', '무리방정식', '분수방정식'],
        mistakes: [
          '삼차방정식은 항상 세 개의 실근을 가진다고 착각 (허근 가능)',
          '인수분해 후 각 인수를 0으로 놓는 과정에서 일부 인수 누락',
          '연립방정식에서 해를 구한 후 원래 방정식에 대입하여 검산하지 않음',
        ],
        prevention: [
          '삼차방정식은 최소 하나의 실근을 가짐 (나머지는 실근 또는 허근)',
          '분수방정식에서 구한 해가 분모를 0으로 만들지 않는지 확인',
        ],
      },
    ],
  },
  {
    unit: '여러 가지 부등식',
    mistakes: [
      {
        keywords: ['여러 가지 부등식', '이차부등식', '절댓값 부등식', '연립부등식'],
        mistakes: [
          '이차부등식에서 최고차항의 계수가 음수일 때 부등호 방향 처리 실수',
          '절댓값 부등식에서 경우 나누기를 하지 않거나 잘못 나눔',
          '연립부등식의 해를 구할 때 교집합을 합집합으로 착각',
        ],
        prevention: [
          '이차부등식은 반드시 그래프를 그려서 해결',
          '|x| < a면 -a < x < a, |x| > a면 x < -a 또는 x > a',
        ],
      },
    ],
  },
  {
    unit: '경우의 수',
    mistakes: [
      {
        keywords: ['경우의 수', '순열', '조합'],
        mistakes: [
          '합의 법칙과 곱의 법칙을 상황에 맞지 않게 적용',
          '중복되는 경우를 제외하지 않음',
          '"적어도" 조건을 여사건으로 처리하지 않고 직접 계산하다 누락',
        ],
        prevention: [
          '동시에 일어날 수 없으면 합의 법칙, 연속적으로 일어나면 곱의 법칙',
          '복잡한 조건은 여사건(전체 - 해당 안 되는 경우)으로 접근',
        ],
      },
    ],
  },
  {
    unit: '순열과 조합',
    mistakes: [
      {
        keywords: ['순열과 조합', '순열', '조합', 'nPr', 'nCr', '같은것이 있는 순열'],
        mistakes: [
          '순서가 중요한 상황에서 조합(C)을 사용하거나 그 반대',
          '같은 것이 있는 순열에서 나누는 것을 잊음 (n!/p!q!...)',
          '원순열에서 (n-1)!을 적용해야 하는데 n!로 계산',
        ],
        prevention: [
          '순서 O → 순열(P), 순서 X → 조합(C)',
          '원순열 = (n-1)!, 염주순열 = (n-1)!/2',
        ],
      },
    ],
  },
  {
    unit: '행렬의 뜻과 연산',
    mistakes: [
      {
        keywords: ['행렬의 뜻과 연산', '행렬', '행렬의 덧셈', '행렬의 곱셈', '단위행렬'],
        mistakes: [
          '행렬의 곱셈에서 교환법칙이 성립한다고 착각 (AB ≠ BA)',
          '행렬 곱셈 조건을 확인하지 않음 (A의 열 수 = B의 행 수)',
          '영행렬의 곱이 영행렬이지만, AB = O라고 A = O 또는 B = O로 착각',
        ],
        prevention: [
          '행렬 곱셈: (m×n)(n×p) = (m×p), 가운데 수가 같아야 곱셈 가능',
          'AB = BA인 경우는 특수한 경우, 일반적으로 교환법칙 성립 안 함',
        ],
      },
    ],
  },
  {
    unit: '역행렬',
    mistakes: [
      {
        keywords: ['역행렬'],
        mistakes: [
          '2×2 역행렬 공식에서 ad-bc 대신 ad+bc로 계산',
          '역행렬 존재 조건 det ≠ 0을 det = 0으로 착각',
          '역행렬을 구할 때 주대각선 원소를 서로 바꾸는 것을 잊음',
        ],
        prevention: [
          '2×2 역행렬: [[d, -b], [-c, a]] / (ad-bc), ad-bc ≠ 0일 때만 존재',
          '역행렬 검산: A × A⁻¹ = 단위행렬(I)인지 확인',
        ],
      },
    ],
  },
  {
    unit: '평면좌표',
    mistakes: [
      {
        keywords: ['평면좌표'],
        mistakes: [
          '두 점 사이 거리 공식에서 제곱 후 루트를 씌우는 것을 잊음',
          '내분점과 외분점 공식 혼동 (내분: 사이, 외분: 연장선)',
          '무게중심 공식에서 3으로 나누는 것을 잊음',
        ],
        prevention: [
          '내분점: (mx₂+nx₁)/(m+n), 외분점: (mx₂-nx₁)/(m-n)',
          '무게중심: 세 꼭짓점 좌표의 평균 ((x₁+x₂+x₃)/3, (y₁+y₂+y₃)/3)',
        ],
      },
    ],
  },
  {
    unit: '직선의 방정식',
    mistakes: [
      {
        keywords: ['직선의 방정식'],
        mistakes: [
          '두 점을 지나는 직선의 기울기 계산에서 분자와 분모를 반대로',
          '수직 조건에서 기울기 곱 = -1인데 기울기 합 = -1로 착각',
          '점과 직선 사이 거리 공식에서 절댓값을 빼먹음',
        ],
        prevention: [
          '기울기 = (y₂-y₁)/(x₂-x₁), 분자가 y, 분모가 x',
          '평행: 기울기 같음, 수직: 기울기 곱 = -1',
        ],
      },
    ],
  },
  {
    unit: '원의 방정식',
    mistakes: [
      {
        keywords: ['원의 방정식'],
        mistakes: [
          '(x-a)²+(y-b)²=r²에서 중심을 (-a, -b)로 착각',
          '일반형 → 표준형 변환 시 완전제곱식 만들기에서 계수 처리 오류',
          '원과 직선의 위치 관계에서 d와 r 비교를 반대로',
        ],
        prevention: [
          '(x-a)²+(y-b)²=r²의 중심은 (a, b), 반지름은 r',
          'd < r: 두 점에서 만남, d = r: 접함, d > r: 만나지 않음',
        ],
      },
    ],
  },
  {
    unit: '도형의 이동',
    mistakes: [
      {
        keywords: ['도형의 이동', '평행이동', '대칭이동'],
        mistakes: [
          '점의 이동과 방정식의 이동에서 부호 처리를 같게 함',
          'x축 대칭, y축 대칭, 원점 대칭의 규칙을 혼동',
          '평행이동 (a, b)만큼을 방정식에 적용할 때 부호를 반대로 안 함',
        ],
        prevention: [
          '점 (x, y) → (x+a, y+b), 방정식은 x 대신 x-a, y 대신 y-b 대입',
          'x축 대칭: y부호 변경, y축 대칭: x부호 변경, 원점 대칭: 둘 다 변경',
        ],
      },
    ],
  },
  {
    unit: '집합',
    mistakes: [
      {
        keywords: ['집합', '부분집합', '교집합', '합집합', '차집합', '여집합', '공집합', '드모르간'],
        mistakes: [
          '공집합(∅)의 원소 개수를 1로 착각 (0개가 맞음)',
          '드모르간 법칙 적용 시 ∪와 ∩를 바꾸지 않음',
          'A-B를 A∩Bᶜ가 아닌 다른 식으로 착각',
        ],
        prevention: [
          '(A∪B)ᶜ = Aᶜ∩Bᶜ, (A∩B)ᶜ = Aᶜ∪Bᶜ (드모르간 법칙)',
          '벤 다이어그램을 그려 연산 결과 확인',
        ],
      },
    ],
  },
  {
    unit: '명제',
    mistakes: [
      {
        keywords: ['명제', '명제의 역', '명제의 이', '명제의 대우', '필요조건', '충분조건', '귀류법'],
        mistakes: [
          '역, 이, 대우의 정의를 혼동',
          '명제가 참이면 역도 참이라고 착각 (대우만 참)',
          '필요조건과 충분조건을 반대로 판단',
        ],
        prevention: [
          'p → q가 참이면 대우(~q → ~p)만 반드시 참',
          'p → q: p는 충분조건, q는 필요조건',
        ],
      },
    ],
  },
  {
    unit: '절대부등식',
    mistakes: [
      {
        keywords: ['절대부등식'],
        mistakes: [
          '산술-기하 평균에서 등호 성립 조건(a=b)을 확인하지 않음',
          '음수에 산술-기하 평균을 적용 (양수일 때만 적용 가능)',
          '(a+b)/2 ≥ √(ab)에서 부등호 방향을 반대로',
        ],
        prevention: [
          '산술평균 ≥ 기하평균, 등호는 a = b일 때만 성립',
          '최솟값 구할 때는 등호 성립 조건이 문제 조건과 맞는지 확인',
        ],
      },
    ],
  },
  {
    unit: '함수',
    mistakes: [
      {
        keywords: ['함수의 뜻', '합성함수', '일대일함수', '일대일대응', '함수의 정의', '정의역', '치역', '공역'],
        mistakes: [
          '일대일함수의 조건을 일대일대응의 조건으로 착각',
          '합성함수 (f∘g)(x) = f(g(x))에서 계산 순서를 g(f(x))로 착각',
          '함수의 정의를 만족하지 않는 관계도 함수로 판단',
        ],
        prevention: [
          '합성함수: (f∘g)(x) = f(g(x)), 안쪽 g부터 계산',
          '함수: 정의역의 모든 원소에 치역의 원소가 하나씩만 대응',
        ],
      },
    ],
  },
  {
    unit: '역함수',
    mistakes: [
      {
        keywords: ['역함수'],
        mistakes: [
          '역함수가 존재하지 않는 함수(일대일대응 아닌)에서 역함수를 구하려 함',
          'y = f(x)에서 x와 y를 바꾼 후 y에 대해 정리하지 않음',
          '역함수의 그래프가 y = x에 대칭임을 이용하지 않음',
        ],
        prevention: [
          '역함수 존재 조건: 일대일대응 (일대일함수 + 위로의 함수)',
          '역함수 구하기: x와 y 바꾸기 → y에 대해 정리',
        ],
      },
    ],
  },
  {
    unit: '유리함수',
    mistakes: [
      {
        keywords: ['유리함수'],
        mistakes: [
          '점근선의 방정식을 점으로 표현 (x = 2가 아닌 (2, 0)으로)',
          'y = k/(x-p) + q에서 점근선을 x = -p, y = -q로 착각',
          '분모가 0이 되는 x값을 정의역에서 제외하지 않음',
        ],
        prevention: [
          'y = k/(x-p) + q의 점근선: x = p, y = q, 그래프의 중심 (p, q)',
          '유리함수의 정의역: 분모 ≠ 0인 모든 실수',
        ],
      },
    ],
  },
  {
    unit: '무리함수',
    mistakes: [
      {
        keywords: ['무리함수'],
        mistakes: [
          '√(ax+b)에서 근호 안이 0 이상이어야 하는 조건을 무시',
          'y = √x의 그래프를 y = x²의 그래프와 혼동',
          '무리함수의 치역이 항상 0 이상임을 고려하지 않음',
        ],
        prevention: [
          'y = √(ax+b) + c의 정의역: ax+b ≥ 0, 치역: y ≥ c',
          '시작점에서 그래프가 시작됨을 기억',
        ],
      },
    ],
  },
  {
    unit: '지수',
    mistakes: [
      {
        keywords: ['지수법칙', '거듭제곱', '거듭제곱근', '지수의 확장'],
        mistakes: [
          'a^(1/n) = n√a에서 n의 위치를 잘못 이해',
          '음수의 짝수 거듭제곱근이 존재한다고 착각 (실수 범위에서 존재 안 함)',
          'a^0 = 0으로 착각 (a^0 = 1, 단 a ≠ 0)',
        ],
        prevention: [
          'a^(m/n) = (ⁿ√a)^m = ⁿ√(a^m)',
          '밑이 양수일 때만 지수법칙 적용 가능',
        ],
      },
    ],
  },
  {
    unit: '로그',
    mistakes: [
      {
        keywords: ['로그', '로그법칙', '상용로그', '자연로그'],
        mistakes: [
          'log(a+b) = log a + log b로 착각 (log(ab) = log a + log b)',
          '진수 조건(> 0)과 밑 조건(> 0, ≠ 1) 확인 누락',
          '밑 변환 공식 적용 시 분자와 분모를 반대로',
        ],
        prevention: [
          'log ab = log a + log b, log(a/b) = log a - log b, log a^n = n log a',
          '문제 풀기 전 진수 > 0, 밑 > 0이고 ≠ 1 조건 먼저 확인',
        ],
      },
    ],
  },
  {
    unit: '지수함수',
    mistakes: [
      {
        keywords: ['지수함수'],
        mistakes: [
          'y = a^x에서 a > 1일 때와 0 < a < 1일 때의 증감을 혼동',
          '지수함수 그래프가 x축과 만난다고 착각 (점근선이므로 만나지 않음)',
          'y = a^x가 항상 점 (0, 1)을 지남을 잊음',
        ],
        prevention: [
          'a > 1: 증가, 0 < a < 1: 감소, 항상 (0, 1)을 지남',
          'x축이 점근선, y > 0 (함숫값은 항상 양수)',
        ],
      },
    ],
  },
  {
    unit: '로그함수',
    mistakes: [
      {
        keywords: ['로그함수'],
        mistakes: [
          '로그함수의 정의역이 모든 실수라고 착각 (x > 0만 가능)',
          '지수함수와 로그함수의 역함수 관계를 잘못 이해',
          'y = log_a x의 그래프가 y축과 만난다고 착각 (점근선이므로 안 만남)',
        ],
        prevention: [
          'y = a^x ↔ y = log_a x는 역함수 관계, y = x 대칭',
          '로그함수는 항상 점 (1, 0)을 지남, y축이 점근선',
        ],
      },
    ],
  },
  {
    unit: '삼각함수',
    mistakes: [
      {
        keywords: ['삼각함수'],
        mistakes: [
          '호도법과 60분법 변환 시 계산 오류 (π rad = 180°)',
          '사분면별 삼각함수의 부호를 외우지 못함',
          'sin²θ + cos²θ = 1을 sin θ + cos θ = 1로 착각',
        ],
        prevention: [
          '1사분면: 모두 +, 2사분면: sin만 +, 3사분면: tan만 +, 4사분면: cos만 +',
          '삼각함수 기본 관계식: sin²θ + cos²θ = 1, tanθ = sinθ/cosθ',
        ],
      },
    ],
  },
  {
    unit: '삼각함수의 그래프',
    mistakes: [
      {
        keywords: ['삼각함수의 그래프', '삼각함수 그래프', '주기', '진폭'],
        mistakes: [
          'y = sin x와 y = cos x의 주기를 π로 착각 (2π가 맞음)',
          'y = a sin(bx + c)에서 주기를 2πb로 착각 (2π/|b|가 맞음)',
          'tan x의 점근선 위치를 잘못 파악',
        ],
        prevention: [
          'sin, cos 주기: 2π / tan 주기: π',
          'y = a sin(bx + c) + d: 진폭 |a|, 주기 2π/|b|',
        ],
      },
    ],
  },
  {
    unit: '삼각함수의 활용',
    mistakes: [
      {
        keywords: ['삼각함수의 활용', '삼각함수 활용', '삼각방정식', '삼각부등식'],
        mistakes: [
          '사인법칙과 코사인법칙을 적용해야 할 상황을 혼동',
          '코사인법칙에서 부호 실수 (a² = b² + c² - 2bc cos A에서 -2bc를 +로)',
          '삼각형 넓이 공식에서 1/2를 빠뜨림',
        ],
        prevention: [
          '사인법칙: 변과 대각 관계, 코사인법칙: 세 변과 한 각 관계',
          '삼각형 넓이 = (1/2)ab sin C',
        ],
      },
    ],
  },
  {
    unit: '등차수열',
    mistakes: [
      {
        keywords: ['등차수열'],
        mistakes: [
          '일반항 공식 a_n = a₁ + (n-1)d에서 (n-1)을 n으로 착각',
          '등차수열의 합 공식에서 n(n-1)/2를 n(n+1)/2로 혼동',
          '등차중항 공식 적용 시 순서를 고려하지 않음',
        ],
        prevention: [
          '일반항: 첫째항 + (항 번호 - 1) × 공차',
          '합 공식: S_n = n(a₁ + a_n)/2 = n{2a₁ + (n-1)d}/2',
        ],
      },
    ],
  },
  {
    unit: '등비수열',
    mistakes: [
      {
        keywords: ['등비수열'],
        mistakes: [
          '일반항 공식 a_n = a₁ × r^(n-1)에서 지수를 n으로 착각',
          '등비수열의 합 공식에서 r = 1인 경우를 고려하지 않음',
          '등비중항에서 부호를 고려하지 않음 (음수 가능)',
        ],
        prevention: [
          '일반항: 첫째항 × 공비^(항 번호 - 1)',
          'r = 1이면 S_n = na₁, r ≠ 1이면 S_n = a₁(1-r^n)/(1-r)',
        ],
      },
    ],
  },
  {
    unit: '수열의 합',
    mistakes: [
      {
        keywords: ['수열의 합', '시그마', 'Σ', '급수'],
        mistakes: [
          'Σ 기호의 성질에서 상수 분리를 잘못 적용',
          'Σk² = n(n+1)(2n+1)/6 공식에서 계수 오류',
          '부분분수 분해 후 소거되는 항을 잘못 파악',
        ],
        prevention: [
          'Σ 공식 암기: Σk = n(n+1)/2, Σk² = n(n+1)(2n+1)/6, Σk³ = {n(n+1)/2}²',
          '부분분수: 소거 패턴을 직접 써보며 확인',
        ],
      },
    ],
  },
  {
    unit: '수학적 귀납법',
    mistakes: [
      {
        keywords: ['수학적 귀납법', '수학적', '귀납법'],
        mistakes: [
          'n = 1일 때 성립 확인을 생략',
          'n = k일 때 성립을 "가정"하는 것을 "증명"으로 착각',
          'n = k+1일 때 증명에서 n = k일 때의 가정을 사용하지 않음',
        ],
        prevention: [
          '귀납법 3단계: ① n=1 확인, ② n=k 가정, ③ n=k+1 유도',
          '3단계에서 반드시 2단계의 가정을 이용해야 함',
        ],
      },
    ],
  },
  {
    unit: '함수의 극한',
    mistakes: [
      {
        keywords: ['함수의 극한', '극한값', '부정형', '좌극한', '우극한'],
        mistakes: [
          '0/0 꼴 부정형을 0으로 바로 계산 (인수분해나 유리화 필요)',
          '∞/∞ 꼴에서 최고차항 계수비가 아닌 상수항 비로 계산',
          '좌극한과 우극한이 다른데 극한이 존재한다고 판단',
        ],
        prevention: [
          '0/0 → 인수분해 또는 유리화, ∞/∞ → 최고차항으로 분자분모 나누기',
          '극한 존재 조건: 좌극한 = 우극한',
        ],
      },
    ],
  },
  {
    unit: '함수의 연속',
    mistakes: [
      {
        keywords: ['함수의 연속', '연속함수', '불연속점', '연속조건'],
        mistakes: [
          '연속의 세 조건 중 일부만 확인하고 연속이라고 판단',
          '미분가능 → 연속을 연속 → 미분가능으로 착각 (역은 성립 안 함)',
          '불연속점에서 함숫값이 정의되어 있으면 연속이라고 착각',
        ],
        prevention: [
          '연속 조건 3가지 모두 확인: ① f(a) 존재, ② lim f(x) 존재, ③ 둘이 같음',
          '연속이지만 미분 불가능한 예: y = |x| (x = 0에서)',
        ],
      },
    ],
  },
  {
    unit: '미분계수와 도함수',
    mistakes: [
      {
        keywords: ['미분계수와 도함수', '미분계수와', '도함수'],
        mistakes: [
          '미분계수의 정의 lim[h→0] (f(a+h)-f(a))/h에서 h→a로 착각',
          '(x^n)\' = x^(n-1)로 착각 ((x^n)\' = nx^(n-1))',
          '상수항의 미분이 그 상수라고 착각 (상수의 미분은 0)',
        ],
        prevention: [
          '(x^n)\' = nx^(n-1), (상수)\' = 0',
          '미분은 "지수를 앞으로 내리고, 지수에서 1을 뺀다"',
        ],
      },
    ],
  },
  {
    unit: '도함수의 활용',
    mistakes: [
      {
        keywords: ['도함수의 활용', '극대', '극소', '최대', '최소', '증가구간', '감소구간'],
        mistakes: [
          'f\'(a) = 0인 점이 항상 극값이라고 착각 (부호 변화 확인 필요)',
          '접선의 방정식에서 기울기를 f(a)로 착각 (f\'(a)가 맞음)',
          '증가/감소 구간에서 f\'(x) = 0인 점을 포함/제외하는 기준 오류',
        ],
        prevention: [
          '극값 판정: f\'(x) = 0인 점 양쪽에서 f\'(x)의 부호가 바뀌는지 확인',
          '접선의 기울기 = 미분계수 f\'(a)',
        ],
      },
    ],
  },
  {
    unit: '도함수의 활용 (속도와 가속도)',
    mistakes: [
      {
        keywords: ['도함수의 활용 (속도와 가속도)', '속도', '가속도', '위치함수', '운동'],
        mistakes: [
          '속도와 속력을 혼동 (속력 = |속도|)',
          '가속도의 부호와 속력 변화의 관계를 잘못 이해',
          '위치-속도-가속도의 미분/적분 관계 혼동',
        ],
        prevention: [
          '위치 s(t) → 미분 → 속도 v(t) → 미분 → 가속도 a(t)',
          '속도와 가속도 부호 같으면 속력 증가, 다르면 속력 감소',
        ],
      },
    ],
  },
  {
    unit: '부정적분',
    mistakes: [
      {
        keywords: ['부정적분'],
        mistakes: [
          '적분상수 C를 빠뜨림',
          '∫x^n dx = x^(n+1)/(n+1)에서 n = -1인 경우 적용 (ln|x| + C가 맞음)',
          '미분의 역순으로 적분할 때 계수 처리 오류',
        ],
        prevention: [
          '부정적분은 반드시 + C 포함',
          '∫x^n dx = x^(n+1)/(n+1) + C (n ≠ -1)',
        ],
      },
    ],
  },
  {
    unit: '정적분',
    mistakes: [
      {
        keywords: ['정적분'],
        mistakes: [
          '정적분 ∫[a,b] f(x)dx에서 F(a) - F(b)로 계산 (F(b) - F(a)가 맞음)',
          '적분 구간의 상한과 하한을 바꿀 때 부호가 바뀜을 잊음',
          '우함수/기함수의 정적분 성질을 적용하지 않음',
        ],
        prevention: [
          '∫[a,b] f(x)dx = F(b) - F(a), "위끝 - 아래끝"',
          '기함수의 -a부터 a까지 정적분 = 0',
        ],
      },
    ],
  },
  {
    unit: '정적분의 활용',
    mistakes: [
      {
        keywords: ['정적분의 활용', '정적분 활용', '넓이', '이동거리'],
        mistakes: [
          '곡선이 x축 아래에 있는 부분을 양수로 계산 (절댓값 또는 음수 처리 필요)',
          '두 곡선 사이 넓이에서 위, 아래 곡선 구분 오류',
          '속도 그래프에서 x축 아래 부분을 이동거리에서 빼버림',
        ],
        prevention: [
          '넓이 = ∫|f(x)|dx 또는 구간 나눠서 부호 처리',
          '이동거리 = ∫|v(t)|dt (속도의 절댓값 적분)',
        ],
      },
    ],
  },
  {
    unit: '순열과 조합',
    mistakes: [
      {
        keywords: ['순열과 조합', '중복순열', '중복조합', '원순열', '염주순열'],
        mistakes: [
          '중복순열 n^r과 중복조합 nHr = ₙ₊ᵣ₋₁Cᵣ를 혼동',
          '같은 것이 있는 순열에서 나누는 팩토리얼 개수 오류',
          '원순열, 염주순열의 공식을 일반 순열에 적용',
        ],
        prevention: [
          '중복순열: 순서 O, 중복 O → n^r',
          '중복조합: 순서 X, 중복 O → nHr = ₙ₊ᵣ₋₁Cᵣ',
        ],
      },
    ],
  },
  {
    unit: '이항정리',
    mistakes: [
      {
        keywords: ['이항정리'],
        mistakes: [
          '(a+b)^n 전개에서 일반항의 r을 0부터 시작하지 않음',
          '특정 항의 계수를 구할 때 조합 계산 실수',
          '(a-b)^n에서 (-1)^r 부호 처리 누락',
        ],
        prevention: [
          '일반항: ₙCᵣ a^(n-r) b^r, r은 0부터 n까지',
          '(a-b)^n의 일반항에서 (-b)^r = (-1)^r b^r',
        ],
      },
    ],
  },
  {
    unit: '확률의 뜻과 활용',
    mistakes: [
      {
        keywords: ['확률의 뜻과 활용', '확률의 덧셈', '확률의 곱셈', '여사건'],
        mistakes: [
          '덧셈정리에서 P(A∩B)를 빼지 않음 (배반이 아닐 때)',
          '여사건 확률 P(A^c) = 1 - P(A)에서 부호 오류',
          '경우의 수로 확률 계산 시 분모(전체 경우의 수) 오류',
        ],
        prevention: [
          'P(A∪B) = P(A) + P(B) - P(A∩B), 배반이면 -P(A∩B) = 0',
          '"적어도" → 여사건으로 접근',
        ],
      },
    ],
  },
  {
    unit: '조건부확률',
    mistakes: [
      {
        keywords: ['조건부확률'],
        mistakes: [
          'P(B|A)와 P(A|B)를 혼동',
          '독립사건과 배반사건을 같은 개념으로 착각',
          '조건부확률 공식 P(B|A) = P(A∩B)/P(A)에서 분모 P(A) 누락',
        ],
        prevention: [
          'P(B|A) = P(A∩B)/P(A): "A가 주어졌을 때 B의 확률"',
          '독립: P(A∩B) = P(A)P(B), 배반: P(A∩B) = 0',
        ],
      },
    ],
  },
  {
    unit: '확률분포',
    mistakes: [
      {
        keywords: ['확률분포'],
        mistakes: [
          '확률분포표에서 확률의 합이 1이 아닌데 진행',
          'V(X) = E(X²) - {E(X)}²에서 제곱 위치 오류',
          'V(aX+b)에서 b도 제곱한다고 착각 (V(aX+b) = a²V(X))',
        ],
        prevention: [
          '확률의 합 = 1 먼저 확인',
          'E(aX+b) = aE(X)+b, V(aX+b) = a²V(X)',
        ],
      },
    ],
  },
  {
    unit: '정규분포',
    mistakes: [
      {
        keywords: ['정규분포'],
        mistakes: [
          '표준화 공식 Z = (X-μ)/σ에서 분자와 분모를 반대로',
          '정규분포표 읽는 방법 오류 (소수점 위치)',
          '대칭성을 이용한 확률 계산에서 부호 처리 실수',
        ],
        prevention: [
          'Z = (X-μ)/σ: "값에서 평균을 빼고 표준편차로 나눈다"',
          'P(Z ≤ -a) = P(Z ≥ a) = 1 - P(Z ≤ a) (대칭성)',
        ],
      },
    ],
  },
  {
    unit: '통계적 추정',
    mistakes: [
      {
        keywords: ['통계적 추정', '표본평균', '신뢰구간', '모평균'],
        mistakes: [
          '신뢰구간 공식에서 √n을 n으로 착각',
          '95% 신뢰도의 z값(1.96)과 99% 신뢰도의 z값(2.58) 혼동',
          '표본의 크기 n이 커지면 신뢰구간이 넓어진다고 착각 (좁아짐)',
        ],
        prevention: [
          '신뢰구간: x̄ ± z × σ/√n',
          'n ↑ → 신뢰구간 폭 ↓, 신뢰도 ↑ → 신뢰구간 폭 ↑',
        ],
      },
    ],
  },
  {
    unit: '수열의 극한',
    mistakes: [
      {
        keywords: ['수열의 극한', '수열의 수렴', '수열의 발산', '극한값'],
        mistakes: [
          '발산하는 수열의 극한을 ∞로 표기하고 수렴한다고 착각',
          '등비수열의 수렴 조건 |r| < 1을 r < 1로 착각',
          '극한의 대소 관계에서 ≤를 <로 바꿔 적용',
        ],
        prevention: [
          '|r| < 1: 수렴(→0), |r| ≥ 1: 발산 (r=1일 때는 상수)',
          '수렴은 유한한 값에 가까워지는 것만 의미',
        ],
      },
    ],
  },
  {
    unit: '급수',
    mistakes: [
      {
        keywords: ['급수', '무한급수', '등비급수', '부분합', '급수의 수렴'],
        mistakes: [
          '급수가 수렴하면 일반항도 수렴하지만, 일반항이 0으로 수렴해도 급수는 발산할 수 있음',
          '등비급수 합 공식 a/(1-r)을 |r| ≥ 1일 때도 적용',
          '부분합을 구하지 않고 급수의 수렴/발산 판정',
        ],
        prevention: [
          '등비급수 수렴 조건: |r| < 1, 합 = a/(1-r)',
          'lim a_n ≠ 0이면 급수는 반드시 발산 (역은 성립 안 함)',
        ],
      },
    ],
  },
  {
    unit: '여러 가지 함수의 미분',
    mistakes: [
      {
        keywords: ['여러 가지 함수의 미분', '지수함수 미분', '로그함수 미분', '삼각함수 미분', '합성함수 미분'],
        mistakes: [
          '(e^x)\' = xe^(x-1)로 착각 ((e^x)\' = e^x)',
          '(ln x)\' = 1로 착각 ((ln x)\' = 1/x)',
          '(sin x)\' = -cos x로 착각 ((sin x)\' = cos x)',
        ],
        prevention: [
          '지수/로그 미분: (e^x)\' = e^x, (a^x)\' = a^x ln a, (ln x)\' = 1/x',
          '삼각함수 미분: (sin x)\' = cos x, (cos x)\' = -sin x',
        ],
      },
    ],
  },
  {
    unit: '여러 가지 미분법',
    mistakes: [
      {
        keywords: ['여러 가지 미분법', '합성함수 미분', '매개변수 미분', '음함수 미분'],
        mistakes: [
          '합성함수 미분에서 안쪽 함수의 미분(속미분)을 빠뜨림',
          '몫의 미분법에서 분자의 부호를 잘못 적용 ((분자)\' = f\'g - fg\')',
          '매개변수 미분에서 dy/dx = (dy/dt)/(dx/dt)의 분자분모를 반대로',
        ],
        prevention: [
          '합성함수: {f(g(x))}\' = f\'(g(x)) × g\'(x) (겉미분 × 속미분)',
          '몫의 미분: (f/g)\' = (f\'g - fg\')/g²',
        ],
      },
    ],
  },
  {
    unit: '도함수의 활용',
    mistakes: [
      {
        keywords: ['도함수의 활용', '변곡점', '오목', '볼록', '이계도함수'],
        mistakes: [
          '변곡점 조건 f\'\'(x) = 0만 확인하고 f\'\'(x)의 부호 변화를 확인하지 않음',
          'f\'\'(x) > 0이면 위로 볼록이라고 착각 (아래로 볼록이 맞음)',
          '극대/극소 판정에서 이계도함수 부호를 반대로 적용',
        ],
        prevention: [
          'f\'\'(x) > 0: 아래로 볼록(∪), f\'\'(x) < 0: 위로 볼록(∩)',
          '변곡점: f\'\'(x) = 0이고 f\'\'(x)의 부호가 바뀌는 점',
        ],
      },
    ],
  },
  {
    unit: '여러 가지 적분법',
    mistakes: [
      {
        keywords: ['여러 가지 적분법', '치환적분', '부분적분', '로다삼지'],
        mistakes: [
          '치환적분에서 dx를 du로 바꾸는 것을 잊음',
          '부분적분에서 f와 g\' 선택을 잘못하여 더 복잡해짐',
          '부분적분 반복 시 부호 번갈아 적용을 잊음',
        ],
        prevention: [
          '치환적분: u = g(x)로 치환 시 du = g\'(x)dx',
          '부분적분: 로다삼지(로그-다항식-삼각-지수) 순서로 f 선택',
        ],
      },
    ],
  },
  {
    unit: '정적분의 활용',
    mistakes: [
      {
        keywords: ['정적분의 활용', '회전체 부피', '급수와 적분', '넓이'],
        mistakes: [
          '회전체 부피 공식 π∫{f(x)}²dx에서 π를 빠뜨림',
          'x축 회전과 y축 회전의 공식을 혼동',
          '급수의 합을 정적분으로 바꿀 때 적분 구간 설정 오류',
        ],
        prevention: [
          'x축 회전 부피: V = π∫[a,b] {f(x)}²dx',
          'y축 회전 부피: V = π∫[c,d] {g(y)}²dy 또는 껍질 적분법 사용',
        ],
      },
    ],
  },
  {
    unit: '포물선',
    mistakes: [
      {
        keywords: ['포물선'],
        mistakes: [
          'y² = 4px에서 초점이 (4p, 0)이라고 착각 ((p, 0)이 맞음)',
          '포물선의 정의(초점과 준선까지 거리 같음)를 활용하지 않음',
          '준선의 방정식을 x = p로 착각 (x = -p가 맞음)',
        ],
        prevention: [
          'y² = 4px: 초점 (p, 0), 준선 x = -p',
          '포물선 위의 점에서 초점까지 거리 = 준선까지 거리',
        ],
      },
    ],
  },
  {
    unit: '타원',
    mistakes: [
      {
        keywords: ['타원', '타원의 방정식', '장축', '단축', '초점'],
        mistakes: [
          'a²과 b²의 크기 비교 없이 장축/단축 결정',
          'c² = a² - b²에서 부호를 c² = a² + b²로 착각',
          '타원의 정의(두 초점까지 거리의 합 = 2a)를 활용하지 않음',
        ],
        prevention: [
          'x²/a² + y²/b² = 1에서 a > b이면 x축이 장축',
          '타원 위의 점에서 두 초점까지 거리의 합 = 2a (장축의 길이)',
        ],
      },
    ],
  },
  {
    unit: '쌍곡선',
    mistakes: [
      {
        keywords: ['쌍곡선'],
        mistakes: [
          'c² = a² - b²로 착각 (c² = a² + b²가 맞음, 타원과 반대)',
          '점근선의 방정식을 구할 때 a와 b의 위치를 반대로',
          '쌍곡선의 정의(두 초점까지 거리의 차 = 2a)를 활용하지 않음',
        ],
        prevention: [
          'x²/a² - y²/b² = 1: 초점 (±c, 0), c² = a² + b²',
          '점근선: y = ±(b/a)x',
        ],
      },
    ],
  },
  {
    unit: '벡터의 연산',
    mistakes: [
      {
        keywords: ['벡터의 연산', '벡터의 덧셈', '벡터의 뺄셈', '실수배'],
        mistakes: [
          '벡터의 뺄셈 a - b의 방향을 잘못 이해 (b에서 a로 향하는 벡터)',
          '영벡터의 크기를 1로 착각 (0이 맞음)',
          '벡터의 실수배에서 음수를 곱하면 방향이 반대가 됨을 잊음',
        ],
        prevention: [
          'a - b = a + (-b): b의 끝점에서 a의 끝점으로 향하는 벡터',
          'k > 0: 같은 방향, k < 0: 반대 방향',
        ],
      },
    ],
  },
  {
    unit: '평면벡터의 성분과 내적',
    mistakes: [
      {
        keywords: ['평면벡터의 성분과 내적', '평면벡터', '성분', '내적'],
        mistakes: [
          '내적 a·b = |a||b|cos θ에서 cos를 sin으로 착각',
          '내적이 0이면 평행이라고 착각 (수직이 맞음)',
          '성분으로 내적 계산 시 a₁b₁ + a₂b₂를 a₁b₂ + a₂b₁로 착각',
        ],
        prevention: [
          'a·b = |a||b|cos θ = a₁b₁ + a₂b₂',
          'a·b = 0 ⟺ a ⊥ b (수직)',
        ],
      },
    ],
  },
  {
    unit: '공간도형',
    mistakes: [
      {
        keywords: ['공간도형'],
        mistakes: [
          '삼수선 정리의 세 가지 수선 관계를 혼동',
          '정사영 넓이 공식 S\' = S cos θ에서 θ를 잘못 설정',
          '두 평면이 이루는 각(이면각)과 두 직선이 이루는 각을 혼동',
        ],
        prevention: [
          '정사영 넓이 = 원래 넓이 × cos(이면각)',
          '삼수선 정리: 평면의 수선 + 평면 위 직선의 수선 관계',
        ],
      },
    ],
  },
  {
    unit: '공간좌표',
    mistakes: [
      {
        keywords: ['공간좌표'],
        mistakes: [
          '공간 거리 공식에서 z성분을 빠뜨림',
          '구의 방정식 (x-a)²+(y-b)²+(z-c)²=r²에서 중심을 (-a,-b,-c)로 착각',
          'xy평면, yz평면, zx평면 위의 점 좌표에서 0이 되는 성분을 혼동',
        ],
        prevention: [
          '거리 = √{(x₂-x₁)² + (y₂-y₁)² + (z₂-z₁)²}',
          'xy평면 위의 점: z = 0, yz평면: x = 0, zx평면: y = 0',
        ],
      },
    ],
  },
];

/**
 * 토픽에 해당하는 자주 하는 실수 찾기
 */
export function findCommonMistakes(topic: string): CommonMistake | null {
  if (!topic) return null;

  for (const unitMistakes of COMMON_MISTAKES) {
    for (const mistake of unitMistakes.mistakes) {
      for (const keyword of mistake.keywords) {
        if (isTopicMatch(topic, keyword)) {
          return mistake;
        }
      }
    }
  }

  return null;
}
